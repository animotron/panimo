@(dir: List[Lot], form : Form[Lot])

    @styles = {
        <style>
        </style>
    }

@scripts = {
<script src="https://maps.googleapis.com/maps/api/js?v=3.exp&sensor=false"></script>
<script>
    function resize () {
        $("#map-canvas").width($(".col-md-4" ).innerWidth ( ) ).height ( $ ( ".col-md-4" ).innerWidth ( ) ) ;
    }
    function onMarker(position, map){
        if (marker != null) marker.setMap(null);
        marker = new google.maps.Marker({
            position : position,
            map : map
        });
        $("#location_latitude").val(position.lat());
        $("#location_longitude").val(position.lng());
    }
    $(window).resize(resize) ;
    var map ;
    var marker = null;
    function initialize ( ) {
        var myLatLng = new google.maps.LatLng ( $ ( "#location_latitude" ).val ( ), $ ( "#location_longitude" ).val ( ) );
        //new google.maps.LatLng(59.933344, 30.320206);
        var mapOptions = {
            zoom : 12,
            center : myLatLng,
            mapTypeId : google.maps.MapTypeId.ROADMAP
        };
        map = new google.maps.Map(document.getElementById("map-canvas"),mapOptions) ;

        google.maps.event.addDomListener(map, "click", function (e){
            onMarker(e.latLng, map);
        });
        marker = new google.maps.Marker ( {
            position : new google.maps.LatLng ( $ ( "#location_latitude" ).val ( ), $ ( "#location_longitude" ).val ( ) ),
            map : map
        } ) ;
    }
    google.maps.event.addDomListener ( window, "load", initialize ) ;
    resize ();
</script>
}

@main("Admin panel", styles, scripts) {
    @nav()
<div class="row">
    <div class="col-md-3 col-md-offset-1">
        <div id="map"><div id="map-canvas"></div></div>
    </div>
    <div class="col-md-3">
        @lot_form(form)
    </div>
    <div class="col-md-2 col-md-offset-1 sidebar-offcanvas" id="sidebar" role="navigation">
        <div class="well sidebar-nav">
            <ul class="nav">
                <li>Lots list</li>
                @dir.map { lot =>
                    <li><a href="@routes.Adminka.edit(lot.id)">@lot.id</a></li>
                }
            </ul>
        </div>
        <!--/.well -->
    </div>
    <!--/span-->
</div><!--/row-->
<script type="text/javascript" src='@routes.Assets.at("/public", "main.css")'></script>
}